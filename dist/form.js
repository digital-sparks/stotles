(()=>{window.Webflow||(window.Webflow=[]);window.Webflow.push(()=>{window.dataLayer=window.dataLayer||[];let c="lead_id",m=localStorage.getItem(c)||v();localStorage.setItem(c,m);function v(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){let r=Math.random()*16|0;return(e==="x"?r:r&3|8).toString(16)})}function d(){let e=new URL(window.location.href);return`${e.origin}${e.pathname}${e.hash}`}function q(e,r,o){window.dataLayer.push({event:`${e}_start`,form_name:r,form_id:o,form_url:d()})}function p(e,r,o,a){window.dataLayer.push({event:`${e}_interaction`,form_name:r,form_id:o,form_url:d(),field_name:a})}function E(e,r,o){window.dataLayer.push({event:`${e}_submitted`,form_name:r,form_id:o,form_url:d(),lead_id:m})}function k(){if(document.querySelector("#report-popup-form")){document.querySelector("#report-popup-form").style.display="none";let e=new URL(document.URL).pathname+"-popup";window.localStorage.setItem(e,"true")}if(document.querySelector("#gated-form")){let r=document.querySelector("#gated-form").closest(".sign-up_component");r.style.display="none";let o=new URL(document.URL).pathname+"-popup";window.localStorage.setItem(o,"true"),document.querySelector(".rich-text-wrap").style.maxHeight="none"}}function C(){if(window.downloadUrl){let e=window.downloadUrl.toLowerCase();if([".pdf",".doc",".docx",".xls",".xlsx",".ppt",".pptx",".zip",".rar"].some(a=>e.endsWith(a))){let a=document.createElement("a");a.href=window.downloadUrl,a.download=window.downloadName,a.target="_blank",document.body.appendChild(a),a.click(),document.body.removeChild(a)}else window.open(window.downloadUrl,"_blank")}}function f(e,r,o,a){let n=!1;e.addEventListener("input",()=>{n||(n=!0,q(r,o,a))},{once:!0}),e.querySelectorAll("input, textarea").forEach(t=>{t.addEventListener("input",()=>{p(r,o,a,t.name)},{once:!0})}),e.querySelectorAll("select").forEach(t=>{t.addEventListener("input",()=>{p(r,o,a,t.name)},{once:!1})})}function y(){let e=Cookies.get("stotles_utm");return e?JSON.parse(e):void 0}function w(e,r,o,a,n=!1){let t=y();if(t&&!n){let s=t.url?`<${t.url}|Link>`:"Unknown",i=t.utmParams||{};e.querySelector("input[name=referrer]").value=t.referrer||"Unknown",e.querySelector("input[name=first_stotles_page]").value=s,e.querySelector("input[name=utm_params]").value=Object.entries(i).map(([u,l])=>`${u}: ${l}`).join(", "),e.querySelector("input[name=utm_source]").value=i.source,e.querySelector("input[name=utm_medium]").value=i.medium,e.querySelector("input[name=utm_campaign]").value=i.campaign,e.querySelector("input[name=utm_content]").value=i.content,e.querySelector("input[name=utm_term]").value=i.term}E(r,o,a),k(),C()}$.validator.addMethod("regex",function(e,r,o){return o&&o.constructor!=RegExp?o=new RegExp(o):o.global&&(o.lastIndex=0),this.optional(r)||o.test(e)}),$.validator.setDefaults({ignore:[]}),document.querySelectorAll("form:not(.hs-form)").forEach(e=>{let r=e.getAttribute("id"),o=e.getAttribute("data-name"),a=e.getAttribute("data-track-name");f(e,a,o,r),$(e).validate({submitHandler:function(n){return w(n,a,o,r),!0},errorClass:"is-error",validClass:"is-success",errorPlacement:function(n,t){t.attr("type")=="checkbox"||t.attr("type")=="radio"?n.appendTo(t.closest(".form_field-wrapper")):t[0].nodeName==="SELECT"?n.appendTo(t.closest('[fs-selectcustom-element="dropdown"]')):t.parent().hasClass("newsletter_input")?n.appendTo(t.parent().parent()):n.insertAfter(t)},highlight:function(n,t,s){n.getAttribute("type")=="checkbox"||n.getAttribute("type")=="radio"?$(n).prev().addClass(t).removeClass(s):n.nodeName==="SELECT"?$(n).closest('[fs-selectcustom-element="dropdown"]').addClass(t).removeClass(s):$(n).addClass(t).removeClass(s)},unhighlight:function(n,t,s){n.getAttribute("type")=="checkbox"||n.getAttribute("type")=="radio"?$(n).prev().removeClass(t).addClass(s):n.nodeName==="SELECT"?$(n).closest('[fs-selectcustom-element="dropdown"]').removeClass(t).addClass(s):$(n).removeClass(t).addClass(s)},rules:{email:{email:!0}},messages:{name:"Name is required",fname:"First name is required",lname:"Last name is required",message:"Message is required",email:"Email address is required",phone:"Phone is required",company:"Company is required",jobtitle:"Job title is required",industry:"Industry is required",privacy:"Please agree to our privacy policy",public_sector_experience:"Please select your experience"}})}),(window.hsFormsOnReady=window.hsFormsOnReady||[]).push(()=>{console.log("hubspot forms ready to load"),document.querySelectorAll("[hubspot-form-id][color-mode]").forEach((e,r)=>{let o=e.getAttribute("hubspot-form-id"),a=e.getAttribute("color-mode")||"light",n=e.getAttribute("hubspot-form-track-name");console.log(o,a,n),console.log(e.parentElement),o&&(e.setAttribute("hubspot-form-index",r),hbspt.forms.create({region:"na1",portalId:"5746318",formId:o,css:"",cssRequired:"",target:`[hubspot-form-id][hubspot-form-index="${r}"]`,cssClass:a==="dark"?"is-dark":"",submitButtonClass:`button width-full ${a==="dark"?"is-white":""}`,onFormReady:t=>{f(t[0],n,n,o),document.querySelectorAll(`[hubspot-form-id="${o}"][hubspot-submit-action="show"]`).forEach(i=>{i.style.display="none"});let s=y();if(s){let i=s.url?`<${s.url}|Link>`:"Unknown",u=s.utmParams||{},l=t[0].querySelector("input[name=stotles_referrer_url]");l&&(l.value=s.referrer||"Unknown");let h=t[0].querySelector("input[name=stotles_first_visit]");h&&(h.value=i||"");let g=t[0].querySelector("input[name=stotles_utm_source]");g&&(g.value=u.source||"");let x=t[0].querySelector("input[name=stotles_utm_medium]");x&&(x.value=u.medium||"");let _=t[0].querySelector("input[name=stotles_utm_campaign]");_&&(_.value=u.campaign||"");let b=t[0].querySelector("input[name=stotles_utm_content]");b&&(b.value=u.content||"");let S=t[0].querySelector("input[name=stotles_utm_term]");S&&(S.value=u.term||"")}},onFormSubmitted:t=>{w(t[0],n,o,o,!0),t[0].style.display="none",document.querySelectorAll(`[hubspot-form-id="${o}"][hubspot-submit-action="hide"]`).forEach(s=>{s.style.display="none"}),document.querySelectorAll(`[hubspot-form-id="${o}"][hubspot-submit-action="show"]`).forEach(s=>{s.style.display="block"})}}))})})});})();
