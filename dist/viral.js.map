{
  "version": 3,
  "sources": ["../bin/live-reload.js", "../src/viral.js"],
  "sourcesContent": ["new EventSource(`${SERVE_ORIGIN}/esbuild`).addEventListener('change', () => location.reload());\n", "window.addEventListener('vlReady', setViralLoops);\n\ndocument.querySelector('#email-form').addEventListener('submit', () => {\n  var targetNode = document.querySelector('div[data-vl-container=\"sharing-stage\"]');\n\n  var observerOptions = {\n    attributes: true,\n    attributeFilter: ['style'],\n  };\n\n  var observer = new MutationObserver(function (mutations) {\n    mutations.forEach(function (mutation) {\n      var displayStyle = window.getComputedStyle(targetNode).display;\n\n      if (displayStyle === 'block') {\n        setViralLoops();\n      }\n    });\n  });\n\n  observer.observe(targetNode, observerOptions);\n});\n\nasync function setViralLoops() {\n  let campaign;\n\n  while (!campaign) {\n    try {\n      campaign = await ViralLoops.getCampaign();\n      if (!campaign) {\n        // console.log('Waiting for campaign...');\n        await new Promise((resolve) => setTimeout(resolve, 200)); // waits for 100ms before next attempt\n      }\n    } catch (error) {\n      console.error('An error occurred:', error);\n    }\n  }\n\n  // console.log(campaign);\n\n  for (let i = 0; i < localStorage.length; i++) {\n    let key = localStorage.key(i);\n    if (key.includes('vl_refCode_')) {\n      const url = 'https://www.stotles.com/operating-system-waitlist';\n\n      const referralCode = campaign.userData\n        ? campaign.userData.referralCode\n        : localStorage.getItem(key);\n\n      const rank = await campaign.getRank({ referralCode: referralCode });\n\n      document.querySelectorAll('[data-name=rank').forEach((el) => {\n        el.textContent = `#${rank.rank}`;\n      });\n\n      // url share link\n      document.querySelector('[data-name=url').textContent =\n        `${url}?referralCode=${referralCode}&refSource=copy`;\n\n      // facebook share link\n      document\n        .querySelector('[data-name=facebook')\n        .setAttribute(\n          'href',\n          `https://www.facebook.com/share_channel/?link=${encodeURIComponent(\n            url + '?referralCode=' + referralCode + '&refSource=facebook'\n          )}&app_id=966242223397117&source_surface=external_reshare&display&hashtag`\n        );\n\n      // whatsapp share link\n      document\n        .querySelector('[data-name=whatsapp')\n        .setAttribute(\n          'href',\n          `https://api.whatsapp.com/send?text=${encodeURIComponent(\n            \"Please help me unlock special rewards by joining me on Stotles' Operating System Waitlist \" +\n              url +\n              '?referralCode=' +\n              referralCode +\n              '&refSource=whatsapp'\n          )}`\n        );\n\n      // twitter share link\n      document\n        .querySelector('[data-name=twitter')\n        .setAttribute(\n          'href',\n          `https://twitter.com/intent/post?url=${encodeURIComponent(\n            url + '?referralCode=' + referralCode + '&refSource=twitter'\n          )}&text=${encodeURIComponent(\n            'I just joined the Stotles Waitlist for AI-driven public sector tools. Help me unlock special rewards by joining too!'\n          )}&via=Stotles_Central`\n        );\n\n      // linkedin share link\n      document\n        .querySelector('[data-name=linkedin')\n        .setAttribute(\n          'href',\n          `https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(\n            url + '?referralCode=' + referralCode + '&refSource=linkedin'\n          )}`\n        );\n\n      // mail share link\n      document\n        .querySelector('[data-name=email')\n        .setAttribute(\n          'href',\n          `mailto:?subject=${encodeURIComponent(\n            'Help me unlock AI powered public sector tools \uD83D\uDD13'\n          )}&body=${encodeURIComponent(\n            \"Hi there,\\n\\nI just joined Stotles' new waitlist for their AI-driven public sector operating system and I think you should too!\\nThe more people I refer, the more chances I have to unlock special rewards.\\n\\nClick my link to check it out: \" +\n              url +\n              '?referralCode=' +\n              referralCode +\n              '&refSource=email\\n\\nThanks,'\n          )}`\n        );\n\n      // copy url function\n      document.querySelector('[data-name=copy-url]').addEventListener('click', function (e) {\n        e.preventDefault();\n        let clipboardInput = document.createElement('input');\n        document.body.appendChild(clipboardInput);\n        clipboardInput.value = `${url}?referralCode=${referralCode}&refSource=copy`;\n        clipboardInput.select();\n        document.execCommand('copy');\n        document.body.removeChild(clipboardInput);\n      });\n    }\n  }\n}\n"],
  "mappings": ";;AAAA,MAAI,YAAY,GAAG,uBAAY,UAAU,EAAE,iBAAiB,UAAU,MAAM,SAAS,OAAO,CAAC;;;ACA7F,SAAO,iBAAiB,WAAW,aAAa;AAEhD,WAAS,cAAc,aAAa,EAAE,iBAAiB,UAAU,MAAM;AACrE,QAAI,aAAa,SAAS,cAAc,wCAAwC;AAEhF,QAAI,kBAAkB;AAAA,MACpB,YAAY;AAAA,MACZ,iBAAiB,CAAC,OAAO;AAAA,IAC3B;AAEA,QAAI,WAAW,IAAI,iBAAiB,SAAU,WAAW;AACvD,gBAAU,QAAQ,SAAU,UAAU;AACpC,YAAI,eAAe,OAAO,iBAAiB,UAAU,EAAE;AAEvD,YAAI,iBAAiB,SAAS;AAC5B,wBAAc;AAAA,QAChB;AAAA,MACF,CAAC;AAAA,IACH,CAAC;AAED,aAAS,QAAQ,YAAY,eAAe;AAAA,EAC9C,CAAC;AAED,iBAAe,gBAAgB;AAC7B,QAAI;AAEJ,WAAO,CAAC,UAAU;AAChB,UAAI;AACF,mBAAW,MAAM,WAAW,YAAY;AACxC,YAAI,CAAC,UAAU;AAEb,gBAAM,IAAI,QAAQ,CAAC,YAAY,WAAW,SAAS,GAAG,CAAC;AAAA,QACzD;AAAA,MACF,SAAS,OAAO;AACd,gBAAQ,MAAM,sBAAsB,KAAK;AAAA,MAC3C;AAAA,IACF;AAIA,aAAS,IAAI,GAAG,IAAI,aAAa,QAAQ,KAAK;AAC5C,UAAI,MAAM,aAAa,IAAI,CAAC;AAC5B,UAAI,IAAI,SAAS,aAAa,GAAG;AAC/B,cAAM,MAAM;AAEZ,cAAM,eAAe,SAAS,WAC1B,SAAS,SAAS,eAClB,aAAa,QAAQ,GAAG;AAE5B,cAAM,OAAO,MAAM,SAAS,QAAQ,EAAE,aAA2B,CAAC;AAElE,iBAAS,iBAAiB,iBAAiB,EAAE,QAAQ,CAAC,OAAO;AAC3D,aAAG,cAAc,IAAI,KAAK,IAAI;AAAA,QAChC,CAAC;AAGD,iBAAS,cAAc,gBAAgB,EAAE,cACvC,GAAG,GAAG,iBAAiB,YAAY;AAGrC,iBACG,cAAc,qBAAqB,EACnC;AAAA,UACC;AAAA,UACA,gDAAgD;AAAA,YAC9C,MAAM,mBAAmB,eAAe;AAAA,UAC1C,CAAC;AAAA,QACH;AAGF,iBACG,cAAc,qBAAqB,EACnC;AAAA,UACC;AAAA,UACA,sCAAsC;AAAA,YACpC,+FACE,MACA,mBACA,eACA;AAAA,UACJ,CAAC;AAAA,QACH;AAGF,iBACG,cAAc,oBAAoB,EAClC;AAAA,UACC;AAAA,UACA,uCAAuC;AAAA,YACrC,MAAM,mBAAmB,eAAe;AAAA,UAC1C,CAAC,SAAS;AAAA,YACR;AAAA,UACF,CAAC;AAAA,QACH;AAGF,iBACG,cAAc,qBAAqB,EACnC;AAAA,UACC;AAAA,UACA,uDAAuD;AAAA,YACrD,MAAM,mBAAmB,eAAe;AAAA,UAC1C,CAAC;AAAA,QACH;AAGF,iBACG,cAAc,kBAAkB,EAChC;AAAA,UACC;AAAA,UACA,mBAAmB;AAAA,YACjB;AAAA,UACF,CAAC,SAAS;AAAA,YACR,oPACE,MACA,mBACA,eACA;AAAA,UACJ,CAAC;AAAA,QACH;AAGF,iBAAS,cAAc,sBAAsB,EAAE,iBAAiB,SAAS,SAAU,GAAG;AACpF,YAAE,eAAe;AACjB,cAAI,iBAAiB,SAAS,cAAc,OAAO;AACnD,mBAAS,KAAK,YAAY,cAAc;AACxC,yBAAe,QAAQ,GAAG,GAAG,iBAAiB,YAAY;AAC1D,yBAAe,OAAO;AACtB,mBAAS,YAAY,MAAM;AAC3B,mBAAS,KAAK,YAAY,cAAc;AAAA,QAC1C,CAAC;AAAA,MACH;AAAA,IACF;AAAA,EACF;",
  "names": []
}
